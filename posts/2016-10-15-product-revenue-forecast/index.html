<!doctype html><html lang=en dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Simulating the revenue of a product with Monte-Carlo random walks | Dario Arcos-Díaz, PhD</title><meta name=keywords content="forecasting,simulation"><meta name=description content="I take a look at how we can model the future revenue of a product by making certain assumptions and running a Monte Carlo simulation."><meta name=author content="Dario Arcos-Díaz"><link rel=canonical href=https://www.arcosdiaz.com/blog/posts/2016-10-15-product-revenue-forecast/><link crossorigin=anonymous href=/blog/assets/css/stylesheet.da3211e5ef867bf2b75fd5a6515cfed7195c011e8ab735694e203810a827097b.css integrity="sha256-2jIR5e+Ge/K3X9WmUVz+1xlcAR6KtzVpTiA4EKgnCXs=" rel="preload stylesheet" as=style><link rel=icon href=https://www.arcosdiaz.com/blog/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.arcosdiaz.com/blog/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.arcosdiaz.com/blog/favicon-32x32.png><link rel=apple-touch-icon href=https://www.arcosdiaz.com/blog/apple-touch-icon.png><link rel=mask-icon href=https://www.arcosdiaz.com/blog/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://www.arcosdiaz.com/blog/posts/2016-10-15-product-revenue-forecast/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-2Q04SCXNNC"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-2Q04SCXNNC")}</script><meta property="og:url" content="https://www.arcosdiaz.com/blog/posts/2016-10-15-product-revenue-forecast/"><meta property="og:site_name" content="Dario Arcos-Díaz, PhD"><meta property="og:title" content="Simulating the revenue of a product with Monte-Carlo random walks"><meta property="og:description" content="I take a look at how we can model the future revenue of a product by making certain assumptions and running a Monte Carlo simulation."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2016-10-15T00:00:00+00:00"><meta property="article:modified_time" content="2016-10-15T00:00:00+00:00"><meta property="article:tag" content="Forecasting"><meta property="article:tag" content="Simulation"><meta property="og:image" content="https://www.arcosdiaz.com/images/product-revenue_thumb.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.arcosdiaz.com/images/product-revenue_thumb.png"><meta name=twitter:title content="Simulating the revenue of a product with Monte-Carlo random walks"><meta name=twitter:description content="I take a look at how we can model the future revenue of a product by making certain assumptions and running a Monte Carlo simulation."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.arcosdiaz.com/blog/posts/"},{"@type":"ListItem","position":2,"name":"Simulating the revenue of a product with Monte-Carlo random walks","item":"https://www.arcosdiaz.com/blog/posts/2016-10-15-product-revenue-forecast/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Simulating the revenue of a product with Monte-Carlo random walks","name":"Simulating the revenue of a product with Monte-Carlo random walks","description":"I take a look at how we can model the future revenue of a product by making certain assumptions and running a Monte Carlo simulation.","keywords":["forecasting","simulation"],"articleBody":"Being able to see the future would be a great superpower (or so one would think). Luckily, it is already possible to model the future using Python to gain insights into a number of problems from many different areas. In marketing, being able to model how successful a new product will be, would be of great use. In this post, I will take a look at how we can model the future revenue of a product by making certain assumptions and running a Monte Carlo Markov Chain simulation.\nWhat are Monte Carlo methods? Wikipedia tells us that:\nMonte Carlo methods (or Monte Carlo experiments) are a broad class of computational algorithms that rely on repeated random sampling to obtain numerical results. Their essential idea is using randomness to solve problems that might be deterministic in principle.\nIn simple terms, we define a number of rules about how a system will behave based on assumptions, and then use random samplings of these conditions over and over and measure the results. We can then look at the results altogether to gain insights into our model.\nLet’s see this in practice!\nimport numpy as np from pylab import triangular, zeros, percentile from scipy.stats import binom import pandas as pd import seaborn as sns sns.set_palette('coolwarm') sns.set_style(\"whitegrid\") import matplotlib.pyplot as plt %matplotlib inline /Users/dario/anaconda/envs/tensorflow/lib/python3.5/site-packages/matplotlib/font_manager.py:273: UserWarning: Matplotlib is building the font cache using fc-list. This may take a moment. warnings.warn('Matplotlib is building the font cache using fc-list. This may take a moment.') /Users/dario/anaconda/envs/tensorflow/lib/python3.5/site-packages/matplotlib/font_manager.py:273: UserWarning: Matplotlib is building the font cache using fc-list. This may take a moment. warnings.warn('Matplotlib is building the font cache using fc-list. This may take a moment.') Define the initial assumptions What assumptions can we safely make regarding our new product? For example, what is the estimated market size that we want to work with and what is the estimated price that we can expect. We also define the num_timesteps, the number of years for which we want to make the calculations.\n# initial market size assumption (total number of potential users) marketsize_min = 5000 marketsize_mode = 12000 marketsize_max = 15000 marketshare_init = triangular(.003, .005, .01) # min, mode, max # initial percentage of users that use the product price_min=500 # minimum product price price_mode=1000 # mode product price price_max=1500 # maximum product price num_timesteps=10 # number of years for the simulation num_simulations=1024 # number of simulations per year perc_selection = [5, 25, 50, 75, 95] # percentiles to visualize in plots Define the functions to calculate market share and revenue of a product These are the functions used to get the data points by random sampling. Each time we run each function, the variables are randomly defined from a range and a result is obtained, e.g. a market share or a revenue amount.\ndef calc_marketshare(marketsize, marketshare): ''' Calculates product market share for a given year as percentage of users that use the product compared to total number of users Arguments: marketsize : total market size as number of potential users marketshare: observed/assumed percentage of users that use the product ''' share = binom.rvs(marketsize, marketshare, size=1) / marketsize return share def calc_revenue(marketsize, marketshare): ''' Calculates the revenue development over a number of years Arguments: marketsize: total market size as number of potential users marketshare : observed/assumed percentarge of users that use the product ''' product_price = triangular(price_min, price_mode, price_max) volume = marketsize*marketshare revenue = product_price * volume return revenue Additionally, in case that a distribution is not included in the standard statistical modules of Python, we can custom write them. For example, we can define functions to return logistic and sigmoid distributions.\ndef logist(x, loc, scale, factor): ''' Logistic distribution Args: x : variable in x-axis, e.g. time loc : the mean of the distribution, maximum probability scale : steepness of the curve, higher -\u003e steeper factor : multiplies to obtain higher probabilities overall ''' return factor*np.exp((loc-x)/scale)/(scale*(1+np.exp((loc-x)/scale))**2) def sigmoid(x): L, q, loc = 10, 1, 3 return L/(1+np.exp(-q*(x-loc))) Why do we need this logistic distribution? For example, if we want to take into account the market growth in the next ten years, we could simply assume it will be 1% or 2% or 10% and keep it constant. However, we have Python on our side and can rather model this growth in a semi-random way. We assume that the market growth is more likely to be lower (between 0 and 4%) but we want to also consider the lower probability cases in which the growth could be higher, e.g. 8%.\ndef logist_test(x): loc, scale = 2, 2 return 4*np.exp((loc-x)/scale)/(scale*(1+np.exp((loc-x)/scale))**2) x = np.arange(0,10) plt.plot(logist_test(x)) #plt.plot(bins, logist(bins, loc, scale)*count.max()/logist(bins, loc, scale).max()) plt.show() Data collection and simulation Now that we have all assumptions and “rules” in place, let’s get some data points.\nFirst let’s create some empty matrixes where we will put the data later.\nu = zeros((num_simulations,), dtype=float) # temporary market size matrix as number of potential users s = zeros((num_simulations,), dtype=float) # temporary market share matrix r = zeros((num_simulations,), dtype=float) # temporary revenue matrix rev = zeros((num_timesteps, num_simulations), dtype=float) # revenue data collection by year percentiles_rev = zeros((num_timesteps,len(perc_selection)), dtype=float) # percentiles_rev data collection by year usr = zeros((num_timesteps, num_simulations), dtype=float) # users data collection by year percentiles_usr = zeros((num_timesteps,len(perc_selection)), dtype=float) # percentiles for total users sha = zeros((num_timesteps, num_simulations), dtype=float) # market share data collection by year percentiles_sha = zeros((num_timesteps,len(perc_selection)), dtype=float) # percentiles for market share Now we can run the simulations to get our data points for the next 10 years. The results are captured in the pre-created matrices.\nfor t in range(0, num_timesteps): if t==0: # First year starting with initial assumptions for k in range(num_simulations): u[k] = triangular(marketsize_min,marketsize_mode,marketsize_max) # triangular distribution of current number of potential users s[k] = calc_marketshare(u[k], marketshare_init) # market share for product r[k] = calc_revenue(u[k], s[k]) # revenue # store values in first row of matrices: rev[t,:] += r usr[t,:] += u sha[t,:] = s #percentiles of the complete revenue row at time t percentiles_rev[t,:] = percentile(rev[t,:], perc_selection) percentiles_usr[t,:] = percentile(usr[t,:], perc_selection) percentiles_sha[t,:] = percentile(sha[t,:], perc_selection) else: # Following years starting with the previous year's data for k in range(num_simulations): # estimate how much the market has grown: loc = triangular(1, 2, 4) scale = triangular(1, 2, 3) factor = 3 marketgrowth = logist(t, loc, scale, factor) u[k] += u[k] * marketgrowth # apply market growth s[k] = calc_marketshare(u[k], s[k]) + logist(t, 4, 5, 1) # apply market share increase r[k] = calc_revenue(u[k], s[k]) # calculate revenue # store values in following rows of matrices rev[t,:] = rev[t-1,:] + r usr[t,:] += u sha[t,:] = s #percentiles of the complete revenue row at time t percentiles_rev[t,:] = percentile(rev[t,:], perc_selection) percentiles_usr[t,:] = percentile(usr[t,:], perc_selection) percentiles_sha[t,:] = percentile(sha[t,:], perc_selection) Revenue simulation plots Having captured all our data, we can now plot it to see how the variable of interest, in this case the revenue of the new product, develops in the next 10 years.\nFirst we print the percentiles to get the numeric data:\n# Print the percentiles of revenue df = pd.DataFrame(percentiles_rev, columns=['5%','25%','50%','75%','95%']) df Now we can plot these percentiles of revenue in an aggregated form.\n# Plot the percentiles of revenue x = np.arange(0,10) df.plot(kind='line', color='black', linewidth=0.2) plt.fill_between(x,df['25%'].values,df['75%'].values, color='grey', alpha=0.6) plt.fill_between(x,df['5%'].values,df['95%'].values, color='grey', alpha=0.4) plt.title(\"Revenue percentiles over %s years\" %num_timesteps) plt.show() We can also plot the individual “random walks” of the simulation just for fun.\n# Plot the random walks for revenue df2=pd.DataFrame(rev) df2.plot(kind='line', legend=False, alpha=.03) plt.title(\"Revenue random walks over %s years\" %num_timesteps) plt.show() Market share simulation plots Similarly, let’s plot our simulation results for the market share calculations\n# Print the percentiles of market size df_usr = pd.DataFrame(percentiles_usr, columns=['5%','25%','50%','75%','95%']) #print(df) # Plot the percentiles market size x = np.arange(0,10) df_usr.plot(kind='line', color='w') plt.fill_between(x,df_usr['25%'].values,df_usr['75%'].values, color='grey', alpha=0.6) plt.fill_between(x,df_usr['5%'].values,df_usr['95%'].values, color='grey', alpha=0.4) plt.title(\"Market size percentiles over %s years\" %num_timesteps) plt.show() # Plot the random walks for market size df2=pd.DataFrame(usr) df2.plot(kind='line', legend=False, alpha=.03) plt.title(\"Market size random walks over %s years\" %num_timesteps) plt.show() Product revenue and market size distribution Finally, we can visualize how the revenue is distributed in our simulation for a particular year using histograms. For example, let’s plot the distribution of revenue:\nax1 = plt.subplot(111) ax1 plt.title(\"Product revenue, price mode %s €\" %price_mode) plt.hist(rev[0], bins=50, range=(0, r.max()), label='year 1') plt.hist(rev[2], bins=50, range=(0, r.max()), label='year 3') plt.hist(rev[4], bins=50, range=(0, r.max()), label='year 5')#axis([0,width,0,height]) plt.hist(rev[6], bins=50, range=(0, r.max()), label='year 7') plt.legend() plt.show() Of course, the farther in the future our model, the wider the distribution, as our model gets more and more uncertain.\nWe can do the same with the market size distribution:\nax2 = plt.subplot(111) ax2 plt.title(\"Market size, price mode %s €\" %price_mode) #hist(c, bins=50, range=(0, c.max()), ) plt.hist(usr[0], bins=50, range=(0, u.max()), label='year 1') plt.hist(usr[2], bins=50, range=(0, u.max()), label='year 3') plt.hist(usr[4], bins=50, range=(0, u.max()), label='year 5') plt.hist(usr[6], bins=50, range=(0, u.max()), label='year 7') plt.show() Final remarks In this post, we saw how we can use Python to model a simple Monte Carlo simulation and how we can plot these results to look at forecasting from a different perspective.\n","wordCount":"1484","inLanguage":"en","image":"https://www.arcosdiaz.com/images/product-revenue_thumb.png","datePublished":"2016-10-15T00:00:00Z","dateModified":"2016-10-15T00:00:00Z","author":{"@type":"Person","name":"Dario Arcos-Díaz"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.arcosdiaz.com/blog/posts/2016-10-15-product-revenue-forecast/"},"publisher":{"@type":"Organization","name":"Dario Arcos-Díaz, PhD","logo":{"@type":"ImageObject","url":"https://www.arcosdiaz.com/blog/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://www.arcosdiaz.com/blog/ accesskey=h title="Dario Arcos-Díaz, PhD (Alt + H)">Dario Arcos-Díaz, PhD</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.arcosdiaz.com/blog/about/ title=About><span>About</span></a></li><li><a href=https://www.arcosdiaz.com/blog/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.arcosdiaz.com/blog/>Home</a>&nbsp;»&nbsp;<a href=https://www.arcosdiaz.com/blog/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Simulating the revenue of a product with Monte-Carlo random walks</h1><div class=post-description>I take a look at how we can model the future revenue of a product by making certain assumptions and running a Monte Carlo simulation.</div><div class=post-meta><span title='2016-10-15 00:00:00 +0000 UTC'>October 15, 2016</span>&nbsp;·&nbsp;<span>7 min</span>&nbsp;·&nbsp;<span>Dario Arcos-Díaz</span></div></header><figure class=entry-cover><img loading=eager src=https://www.arcosdiaz.com/images/product-revenue_thumb.png alt></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><ul><li><a href=#what-are-monte-carlo-methods aria-label="What are Monte Carlo methods?">What are Monte Carlo methods?</a></li><li><a href=#define-the-initial-assumptions aria-label="Define the initial assumptions">Define the initial assumptions</a></li><li><a href=#define-the-functions-to-calculate-market-share-and-revenue-of-a-product aria-label="Define the functions to calculate market share and revenue of a product">Define the functions to calculate market share and revenue of a product</a></li><li><a href=#data-collection-and-simulation aria-label="Data collection and simulation">Data collection and simulation</a></li><li><a href=#revenue-simulation-plots aria-label="Revenue simulation plots">Revenue simulation plots</a></li><li><a href=#market-share-simulation-plots aria-label="Market share simulation plots">Market share simulation plots</a></li><li><a href=#product-revenue-and-market-size-distribution aria-label="Product revenue and market size distribution">Product revenue and market size distribution</a></li></ul><li><a href=#final-remarks aria-label="Final remarks">Final remarks</a></li></ul></div></details></div><div class=post-content><p>Being able to see the future would be a great superpower (or so one would think). Luckily, it is already possible to <em>model</em> the future using Python to gain insights into a number of problems from many different areas. In marketing, being able to model how successful a new product will be, would be of great use. In this post, I will take a look at how we can model the future revenue of a product by making certain assumptions and running a Monte Carlo Markov Chain simulation.</p><h2 id=what-are-monte-carlo-methods>What are Monte Carlo methods?<a hidden class=anchor aria-hidden=true href=#what-are-monte-carlo-methods>#</a></h2><p>Wikipedia tells us that:</p><blockquote><p>Monte Carlo methods (or Monte Carlo experiments) are a broad class of computational algorithms that rely on repeated random sampling to obtain numerical results. Their essential idea is using randomness to solve problems that might be deterministic in principle.</p></blockquote><p>In simple terms, we define a number of rules about how a system will behave based on assumptions, and then use random samplings of these conditions over and over and measure the results. We can then look at the results altogether to gain insights into our model.</p><p>Let&rsquo;s see this in practice!</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> numpy <span style=color:#66d9ef>as</span> np
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> pylab <span style=color:#f92672>import</span> triangular, zeros, percentile
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> scipy.stats <span style=color:#f92672>import</span> binom
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> pandas <span style=color:#66d9ef>as</span> pd
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> seaborn <span style=color:#66d9ef>as</span> sns
</span></span><span style=display:flex><span>sns<span style=color:#f92672>.</span>set_palette(<span style=color:#e6db74>&#39;coolwarm&#39;</span>)
</span></span><span style=display:flex><span>sns<span style=color:#f92672>.</span>set_style(<span style=color:#e6db74>&#34;whitegrid&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> matplotlib.pyplot <span style=color:#66d9ef>as</span> plt
</span></span><span style=display:flex><span><span style=color:#f92672>%</span>matplotlib inline
</span></span></code></pre></div><pre><code>/Users/dario/anaconda/envs/tensorflow/lib/python3.5/site-packages/matplotlib/font_manager.py:273: UserWarning: Matplotlib is building the font cache using fc-list. This may take a moment.
  warnings.warn('Matplotlib is building the font cache using fc-list. This may take a moment.')
/Users/dario/anaconda/envs/tensorflow/lib/python3.5/site-packages/matplotlib/font_manager.py:273: UserWarning: Matplotlib is building the font cache using fc-list. This may take a moment.
  warnings.warn('Matplotlib is building the font cache using fc-list. This may take a moment.')
</code></pre><h2 id=define-the-initial-assumptions>Define the initial assumptions<a hidden class=anchor aria-hidden=true href=#define-the-initial-assumptions>#</a></h2><p>What assumptions can we safely make regarding our new product? For example, what is the estimated market size that we want to work with and what is the estimated price that we can expect. We also define the num_timesteps, the number of years for which we want to make the calculations.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># initial market size assumption (total number of potential users)</span>
</span></span><span style=display:flex><span>marketsize_min <span style=color:#f92672>=</span> <span style=color:#ae81ff>5000</span>
</span></span><span style=display:flex><span>marketsize_mode <span style=color:#f92672>=</span> <span style=color:#ae81ff>12000</span>
</span></span><span style=display:flex><span>marketsize_max <span style=color:#f92672>=</span> <span style=color:#ae81ff>15000</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>marketshare_init <span style=color:#f92672>=</span> triangular(<span style=color:#ae81ff>.003</span>, <span style=color:#ae81ff>.005</span>, <span style=color:#ae81ff>.01</span>) <span style=color:#75715e># min, mode, max</span>
</span></span><span style=display:flex><span><span style=color:#75715e># initial percentage of users that use the product</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>price_min<span style=color:#f92672>=</span><span style=color:#ae81ff>500</span> <span style=color:#75715e># minimum product price</span>
</span></span><span style=display:flex><span>price_mode<span style=color:#f92672>=</span><span style=color:#ae81ff>1000</span> <span style=color:#75715e># mode product price</span>
</span></span><span style=display:flex><span>price_max<span style=color:#f92672>=</span><span style=color:#ae81ff>1500</span> <span style=color:#75715e># maximum product price</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>num_timesteps<span style=color:#f92672>=</span><span style=color:#ae81ff>10</span> <span style=color:#75715e># number of years for the simulation</span>
</span></span><span style=display:flex><span>num_simulations<span style=color:#f92672>=</span><span style=color:#ae81ff>1024</span> <span style=color:#75715e># number of simulations per year</span>
</span></span><span style=display:flex><span>perc_selection <span style=color:#f92672>=</span> [<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>25</span>, <span style=color:#ae81ff>50</span>, <span style=color:#ae81ff>75</span>, <span style=color:#ae81ff>95</span>] <span style=color:#75715e># percentiles to visualize in plots</span>
</span></span></code></pre></div><h2 id=define-the-functions-to-calculate-market-share-and-revenue-of-a-product>Define the functions to calculate market share and revenue of a product<a hidden class=anchor aria-hidden=true href=#define-the-functions-to-calculate-market-share-and-revenue-of-a-product>#</a></h2><p>These are the functions used to get the data points by random sampling. Each time we run each function, the variables are randomly defined from a range and a result is obtained, e.g. a market share or a revenue amount.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>calc_marketshare</span>(marketsize, marketshare):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;&#39;&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Calculates product market share for a given year as percentage of users
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    that use the product compared to total number of users
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Arguments:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    marketsize : total market size as number of potential users
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    marketshare: observed/assumed percentage of users that use the product
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#39;&#39;&#39;</span>    
</span></span><span style=display:flex><span>    share <span style=color:#f92672>=</span> binom<span style=color:#f92672>.</span>rvs(marketsize, marketshare, size<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>) <span style=color:#f92672>/</span> marketsize    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> share
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>calc_revenue</span>(marketsize, marketshare):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;&#39;&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Calculates the revenue development over a number of years
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Arguments:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    marketsize: total market size as number of potential users
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    marketshare : observed/assumed percentarge of users that use the product
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#39;&#39;&#39;</span>    
</span></span><span style=display:flex><span>    product_price <span style=color:#f92672>=</span> triangular(price_min, price_mode, price_max)
</span></span><span style=display:flex><span>    volume <span style=color:#f92672>=</span> marketsize<span style=color:#f92672>*</span>marketshare
</span></span><span style=display:flex><span>    revenue <span style=color:#f92672>=</span> product_price <span style=color:#f92672>*</span> volume
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> revenue
</span></span></code></pre></div><p>Additionally, in case that a distribution is not included in the standard statistical modules of Python, we can custom write them. For example, we can define functions to return logistic and sigmoid distributions.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>logist</span>(x, loc, scale, factor):
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;&#39;&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Logistic distribution
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    Args:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    x : variable in x-axis, e.g. time
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    loc : the mean of the distribution, maximum probability
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    scale : steepness of the curve, higher -&gt; steeper
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    factor : multiplies to obtain higher probabilities overall
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    &#39;&#39;&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> factor<span style=color:#f92672>*</span>np<span style=color:#f92672>.</span>exp((loc<span style=color:#f92672>-</span>x)<span style=color:#f92672>/</span>scale)<span style=color:#f92672>/</span>(scale<span style=color:#f92672>*</span>(<span style=color:#ae81ff>1</span><span style=color:#f92672>+</span>np<span style=color:#f92672>.</span>exp((loc<span style=color:#f92672>-</span>x)<span style=color:#f92672>/</span>scale))<span style=color:#f92672>**</span><span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>sigmoid</span>(x):
</span></span><span style=display:flex><span>    L, q, loc <span style=color:#f92672>=</span> <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> L<span style=color:#f92672>/</span>(<span style=color:#ae81ff>1</span><span style=color:#f92672>+</span>np<span style=color:#f92672>.</span>exp(<span style=color:#f92672>-</span>q<span style=color:#f92672>*</span>(x<span style=color:#f92672>-</span>loc)))
</span></span></code></pre></div><p>Why do we need this logistic distribution? For example, if we want to take into account the market growth in the next ten years, we could simply assume it will be 1% or 2% or 10% and keep it constant. However, we have Python on our side and can rather model this growth in a semi-random way. We assume that the market growth is more likely to be lower (between 0 and 4%) but we want to also consider the lower probability cases in which the growth could be higher, e.g. 8%.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>logist_test</span>(x):
</span></span><span style=display:flex><span>    loc, scale <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>4</span><span style=color:#f92672>*</span>np<span style=color:#f92672>.</span>exp((loc<span style=color:#f92672>-</span>x)<span style=color:#f92672>/</span>scale)<span style=color:#f92672>/</span>(scale<span style=color:#f92672>*</span>(<span style=color:#ae81ff>1</span><span style=color:#f92672>+</span>np<span style=color:#f92672>.</span>exp((loc<span style=color:#f92672>-</span>x)<span style=color:#f92672>/</span>scale))<span style=color:#f92672>**</span><span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>x <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>arange(<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>plot(logist_test(x))
</span></span><span style=display:flex><span><span style=color:#75715e>#plt.plot(bins, logist(bins, loc, scale)*count.max()/logist(bins, loc, scale).max())</span>
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>show()
</span></span></code></pre></div><p><img alt=png loading=lazy src=/images/2016-10-15-product-revenue-forecast_files/2016-10-15-product-revenue-forecast_11_0.png></p><h2 id=data-collection-and-simulation>Data collection and simulation<a hidden class=anchor aria-hidden=true href=#data-collection-and-simulation>#</a></h2><p>Now that we have all assumptions and &ldquo;rules&rdquo; in place, let&rsquo;s get some data points.</p><p>First let&rsquo;s create some empty matrixes where we will put the data later.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span>u <span style=color:#f92672>=</span> zeros((num_simulations,), dtype<span style=color:#f92672>=</span>float) 
</span></span><span style=display:flex><span><span style=color:#75715e># temporary market size matrix as number of potential users</span>
</span></span><span style=display:flex><span>s <span style=color:#f92672>=</span> zeros((num_simulations,), dtype<span style=color:#f92672>=</span>float) <span style=color:#75715e># temporary market share matrix</span>
</span></span><span style=display:flex><span>r <span style=color:#f92672>=</span> zeros((num_simulations,), dtype<span style=color:#f92672>=</span>float) <span style=color:#75715e># temporary revenue matrix</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>rev <span style=color:#f92672>=</span> zeros((num_timesteps, num_simulations), dtype<span style=color:#f92672>=</span>float) 
</span></span><span style=display:flex><span><span style=color:#75715e># revenue data collection by year</span>
</span></span><span style=display:flex><span>percentiles_rev <span style=color:#f92672>=</span> zeros((num_timesteps,len(perc_selection)), dtype<span style=color:#f92672>=</span>float) 
</span></span><span style=display:flex><span><span style=color:#75715e># percentiles_rev data collection by year</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>usr <span style=color:#f92672>=</span> zeros((num_timesteps, num_simulations), dtype<span style=color:#f92672>=</span>float) 
</span></span><span style=display:flex><span><span style=color:#75715e># users data collection by year</span>
</span></span><span style=display:flex><span>percentiles_usr <span style=color:#f92672>=</span> zeros((num_timesteps,len(perc_selection)), dtype<span style=color:#f92672>=</span>float) 
</span></span><span style=display:flex><span><span style=color:#75715e># percentiles for total users</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sha <span style=color:#f92672>=</span> zeros((num_timesteps, num_simulations), dtype<span style=color:#f92672>=</span>float) 
</span></span><span style=display:flex><span><span style=color:#75715e># market share data collection by year</span>
</span></span><span style=display:flex><span>percentiles_sha <span style=color:#f92672>=</span> zeros((num_timesteps,len(perc_selection)), dtype<span style=color:#f92672>=</span>float) 
</span></span><span style=display:flex><span><span style=color:#75715e># percentiles for market share</span>
</span></span></code></pre></div><p>Now we can run the simulations to get our data points for the next 10 years. The results are captured in the pre-created matrices.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>for</span> t <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>0</span>, num_timesteps):
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> t<span style=color:#f92672>==</span><span style=color:#ae81ff>0</span>: <span style=color:#75715e># First year starting with initial assumptions</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> k <span style=color:#f92672>in</span> range(num_simulations):
</span></span><span style=display:flex><span>            u[k] <span style=color:#f92672>=</span> triangular(marketsize_min,marketsize_mode,marketsize_max) 
</span></span><span style=display:flex><span>            <span style=color:#75715e># triangular distribution of current number of potential users</span>
</span></span><span style=display:flex><span>            s[k] <span style=color:#f92672>=</span> calc_marketshare(u[k], marketshare_init) 
</span></span><span style=display:flex><span>            <span style=color:#75715e># market share for product</span>
</span></span><span style=display:flex><span>            r[k] <span style=color:#f92672>=</span> calc_revenue(u[k], s[k]) <span style=color:#75715e># revenue</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># store values in first row of matrices:</span>
</span></span><span style=display:flex><span>        rev[t,:] <span style=color:#f92672>+=</span> r
</span></span><span style=display:flex><span>        usr[t,:] <span style=color:#f92672>+=</span> u
</span></span><span style=display:flex><span>        sha[t,:] <span style=color:#f92672>=</span> s
</span></span><span style=display:flex><span>        <span style=color:#75715e>#percentiles of the complete revenue row at time t        </span>
</span></span><span style=display:flex><span>        percentiles_rev[t,:] <span style=color:#f92672>=</span> percentile(rev[t,:], perc_selection)
</span></span><span style=display:flex><span>        percentiles_usr[t,:] <span style=color:#f92672>=</span> percentile(usr[t,:], perc_selection)
</span></span><span style=display:flex><span>        percentiles_sha[t,:] <span style=color:#f92672>=</span> percentile(sha[t,:], perc_selection)
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>: <span style=color:#75715e># Following years starting with the previous year&#39;s data</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> k <span style=color:#f92672>in</span> range(num_simulations):
</span></span><span style=display:flex><span>            <span style=color:#75715e># estimate how much the market has grown:</span>
</span></span><span style=display:flex><span>            loc <span style=color:#f92672>=</span> triangular(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>4</span>)
</span></span><span style=display:flex><span>            scale <span style=color:#f92672>=</span> triangular(<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>)
</span></span><span style=display:flex><span>            factor <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>            marketgrowth <span style=color:#f92672>=</span> logist(t, loc, scale, factor)
</span></span><span style=display:flex><span>            u[k] <span style=color:#f92672>+=</span> u[k] <span style=color:#f92672>*</span> marketgrowth <span style=color:#75715e># apply market growth</span>
</span></span><span style=display:flex><span>            s[k] <span style=color:#f92672>=</span> calc_marketshare(u[k], s[k]) <span style=color:#f92672>+</span> logist(t, <span style=color:#ae81ff>4</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>1</span>) 
</span></span><span style=display:flex><span>            <span style=color:#75715e># apply market share increase</span>
</span></span><span style=display:flex><span>            r[k] <span style=color:#f92672>=</span> calc_revenue(u[k], s[k]) <span style=color:#75715e># calculate revenue</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># store values in following rows of matrices</span>
</span></span><span style=display:flex><span>        rev[t,:] <span style=color:#f92672>=</span> rev[t<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>,:] <span style=color:#f92672>+</span> r
</span></span><span style=display:flex><span>        usr[t,:] <span style=color:#f92672>+=</span> u
</span></span><span style=display:flex><span>        sha[t,:] <span style=color:#f92672>=</span> s
</span></span><span style=display:flex><span>        <span style=color:#75715e>#percentiles of the complete revenue row at time t</span>
</span></span><span style=display:flex><span>        percentiles_rev[t,:] <span style=color:#f92672>=</span> percentile(rev[t,:], perc_selection)
</span></span><span style=display:flex><span>        percentiles_usr[t,:] <span style=color:#f92672>=</span> percentile(usr[t,:], perc_selection)
</span></span><span style=display:flex><span>        percentiles_sha[t,:] <span style=color:#f92672>=</span> percentile(sha[t,:], perc_selection)
</span></span></code></pre></div><h2 id=revenue-simulation-plots>Revenue simulation plots<a hidden class=anchor aria-hidden=true href=#revenue-simulation-plots>#</a></h2><p>Having captured all our data, we can now plot it to see how the variable of interest, in this case the revenue of the new product, develops in the next 10 years.</p><p>First we print the percentiles to get the numeric data:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Print the percentiles of revenue</span>
</span></span><span style=display:flex><span>df <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>DataFrame(percentiles_rev, columns<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;5%&#39;</span>,<span style=color:#e6db74>&#39;25%&#39;</span>,<span style=color:#e6db74>&#39;50%&#39;</span>,<span style=color:#e6db74>&#39;75%&#39;</span>,<span style=color:#e6db74>&#39;95%&#39;</span>])
</span></span><span style=display:flex><span>df
</span></span></code></pre></div><p>Now we can plot these percentiles of revenue in an aggregated form.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Plot the percentiles of revenue</span>
</span></span><span style=display:flex><span>x <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>arange(<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span>df<span style=color:#f92672>.</span>plot(kind<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;line&#39;</span>, color<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;black&#39;</span>, linewidth<span style=color:#f92672>=</span><span style=color:#ae81ff>0.2</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>fill_between(x,df[<span style=color:#e6db74>&#39;25%&#39;</span>]<span style=color:#f92672>.</span>values,df[<span style=color:#e6db74>&#39;75%&#39;</span>]<span style=color:#f92672>.</span>values, color<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;grey&#39;</span>, alpha<span style=color:#f92672>=</span><span style=color:#ae81ff>0.6</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>fill_between(x,df[<span style=color:#e6db74>&#39;5%&#39;</span>]<span style=color:#f92672>.</span>values,df[<span style=color:#e6db74>&#39;95%&#39;</span>]<span style=color:#f92672>.</span>values, color<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;grey&#39;</span>, alpha<span style=color:#f92672>=</span><span style=color:#ae81ff>0.4</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>title(<span style=color:#e6db74>&#34;Revenue percentiles over </span><span style=color:#e6db74>%s</span><span style=color:#e6db74> years&#34;</span> <span style=color:#f92672>%</span>num_timesteps)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>show()
</span></span></code></pre></div><p><img alt=png loading=lazy src=/images/2016-10-15-product-revenue-forecast_files/2016-10-15-product-revenue-forecast_19_0.png></p><p>We can also plot the individual &ldquo;random walks&rdquo; of the simulation just for fun.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Plot the random walks for revenue</span>
</span></span><span style=display:flex><span>df2<span style=color:#f92672>=</span>pd<span style=color:#f92672>.</span>DataFrame(rev)
</span></span><span style=display:flex><span>df2<span style=color:#f92672>.</span>plot(kind<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;line&#39;</span>, legend<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>, alpha<span style=color:#f92672>=</span><span style=color:#ae81ff>.03</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>title(<span style=color:#e6db74>&#34;Revenue random walks over </span><span style=color:#e6db74>%s</span><span style=color:#e6db74> years&#34;</span> <span style=color:#f92672>%</span>num_timesteps)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>show()
</span></span></code></pre></div><p><img alt=png loading=lazy src=/images/2016-10-15-product-revenue-forecast_files/2016-10-15-product-revenue-forecast_21_0.png></p><h2 id=market-share-simulation-plots>Market share simulation plots<a hidden class=anchor aria-hidden=true href=#market-share-simulation-plots>#</a></h2><p>Similarly, let&rsquo;s plot our simulation results for the market share calculations</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Print the percentiles of market size</span>
</span></span><span style=display:flex><span>df_usr <span style=color:#f92672>=</span> pd<span style=color:#f92672>.</span>DataFrame(percentiles_usr, columns<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;5%&#39;</span>,<span style=color:#e6db74>&#39;25%&#39;</span>,<span style=color:#e6db74>&#39;50%&#39;</span>,<span style=color:#e6db74>&#39;75%&#39;</span>,<span style=color:#e6db74>&#39;95%&#39;</span>])
</span></span><span style=display:flex><span><span style=color:#75715e>#print(df)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Plot the percentiles market size</span>
</span></span><span style=display:flex><span>x <span style=color:#f92672>=</span> np<span style=color:#f92672>.</span>arange(<span style=color:#ae81ff>0</span>,<span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span>df_usr<span style=color:#f92672>.</span>plot(kind<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;line&#39;</span>, color<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;w&#39;</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>fill_between(x,df_usr[<span style=color:#e6db74>&#39;25%&#39;</span>]<span style=color:#f92672>.</span>values,df_usr[<span style=color:#e6db74>&#39;75%&#39;</span>]<span style=color:#f92672>.</span>values, color<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;grey&#39;</span>, alpha<span style=color:#f92672>=</span><span style=color:#ae81ff>0.6</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>fill_between(x,df_usr[<span style=color:#e6db74>&#39;5%&#39;</span>]<span style=color:#f92672>.</span>values,df_usr[<span style=color:#e6db74>&#39;95%&#39;</span>]<span style=color:#f92672>.</span>values, color<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;grey&#39;</span>, alpha<span style=color:#f92672>=</span><span style=color:#ae81ff>0.4</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>title(<span style=color:#e6db74>&#34;Market size percentiles over </span><span style=color:#e6db74>%s</span><span style=color:#e6db74> years&#34;</span> <span style=color:#f92672>%</span>num_timesteps)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>show()
</span></span></code></pre></div><p><img alt=png loading=lazy src=/images/2016-10-15-product-revenue-forecast_files/2016-10-15-product-revenue-forecast_23_0.png></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># Plot the random walks for market size</span>
</span></span><span style=display:flex><span>df2<span style=color:#f92672>=</span>pd<span style=color:#f92672>.</span>DataFrame(usr)
</span></span><span style=display:flex><span>df2<span style=color:#f92672>.</span>plot(kind<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;line&#39;</span>, legend<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>, alpha<span style=color:#f92672>=</span><span style=color:#ae81ff>.03</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>title(<span style=color:#e6db74>&#34;Market size random walks over </span><span style=color:#e6db74>%s</span><span style=color:#e6db74> years&#34;</span> <span style=color:#f92672>%</span>num_timesteps)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>show()
</span></span></code></pre></div><p><img alt=png loading=lazy src=/images/2016-10-15-product-revenue-forecast_files/2016-10-15-product-revenue-forecast_24_0.png></p><h2 id=product-revenue-and-market-size-distribution>Product revenue and market size distribution<a hidden class=anchor aria-hidden=true href=#product-revenue-and-market-size-distribution>#</a></h2><p>Finally, we can visualize how the revenue is distributed in our simulation for a particular year using histograms. For example, let&rsquo;s plot the distribution of revenue:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span>ax1 <span style=color:#f92672>=</span> plt<span style=color:#f92672>.</span>subplot(<span style=color:#ae81ff>111</span>)
</span></span><span style=display:flex><span>ax1
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>title(<span style=color:#e6db74>&#34;Product revenue, price mode </span><span style=color:#e6db74>%s</span><span style=color:#e6db74> €&#34;</span> <span style=color:#f92672>%</span>price_mode)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>hist(rev[<span style=color:#ae81ff>0</span>], bins<span style=color:#f92672>=</span><span style=color:#ae81ff>50</span>, range<span style=color:#f92672>=</span>(<span style=color:#ae81ff>0</span>, r<span style=color:#f92672>.</span>max()), label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;year 1&#39;</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>hist(rev[<span style=color:#ae81ff>2</span>], bins<span style=color:#f92672>=</span><span style=color:#ae81ff>50</span>, range<span style=color:#f92672>=</span>(<span style=color:#ae81ff>0</span>, r<span style=color:#f92672>.</span>max()), label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;year 3&#39;</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>hist(rev[<span style=color:#ae81ff>4</span>], bins<span style=color:#f92672>=</span><span style=color:#ae81ff>50</span>, range<span style=color:#f92672>=</span>(<span style=color:#ae81ff>0</span>, r<span style=color:#f92672>.</span>max()), label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;year 5&#39;</span>)<span style=color:#75715e>#axis([0,width,0,height])</span>
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>hist(rev[<span style=color:#ae81ff>6</span>], bins<span style=color:#f92672>=</span><span style=color:#ae81ff>50</span>, range<span style=color:#f92672>=</span>(<span style=color:#ae81ff>0</span>, r<span style=color:#f92672>.</span>max()), label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;year 7&#39;</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>legend()
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>show()
</span></span></code></pre></div><p><img alt=png loading=lazy src=/images/2016-10-15-product-revenue-forecast_files/2016-10-15-product-revenue-forecast_26_0.png></p><p>Of course, the farther in the future our model, the wider the distribution, as our model gets more and more uncertain.</p><p>We can do the same with the market size distribution:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none><code class=language-python data-lang=python><span style=display:flex><span>ax2 <span style=color:#f92672>=</span> plt<span style=color:#f92672>.</span>subplot(<span style=color:#ae81ff>111</span>)
</span></span><span style=display:flex><span>ax2
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>title(<span style=color:#e6db74>&#34;Market size, price mode </span><span style=color:#e6db74>%s</span><span style=color:#e6db74> €&#34;</span> <span style=color:#f92672>%</span>price_mode)
</span></span><span style=display:flex><span><span style=color:#75715e>#hist(c, bins=50, range=(0, c.max()), )</span>
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>hist(usr[<span style=color:#ae81ff>0</span>], bins<span style=color:#f92672>=</span><span style=color:#ae81ff>50</span>, range<span style=color:#f92672>=</span>(<span style=color:#ae81ff>0</span>, u<span style=color:#f92672>.</span>max()), label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;year 1&#39;</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>hist(usr[<span style=color:#ae81ff>2</span>], bins<span style=color:#f92672>=</span><span style=color:#ae81ff>50</span>, range<span style=color:#f92672>=</span>(<span style=color:#ae81ff>0</span>, u<span style=color:#f92672>.</span>max()), label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;year 3&#39;</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>hist(usr[<span style=color:#ae81ff>4</span>], bins<span style=color:#f92672>=</span><span style=color:#ae81ff>50</span>, range<span style=color:#f92672>=</span>(<span style=color:#ae81ff>0</span>, u<span style=color:#f92672>.</span>max()), label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;year 5&#39;</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>hist(usr[<span style=color:#ae81ff>6</span>], bins<span style=color:#f92672>=</span><span style=color:#ae81ff>50</span>, range<span style=color:#f92672>=</span>(<span style=color:#ae81ff>0</span>, u<span style=color:#f92672>.</span>max()), label<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;year 7&#39;</span>)
</span></span><span style=display:flex><span>plt<span style=color:#f92672>.</span>show()
</span></span></code></pre></div><p><img alt=png loading=lazy src=/images/2016-10-15-product-revenue-forecast_files/2016-10-15-product-revenue-forecast_28_0.png></p><h1 id=final-remarks>Final remarks<a hidden class=anchor aria-hidden=true href=#final-remarks>#</a></h1><p>In this post, we saw how we can use Python to model a simple Monte Carlo simulation and how we can plot these results to look at forecasting from a different perspective.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.arcosdiaz.com/blog/tags/forecasting/>Forecasting</a></li><li><a href=https://www.arcosdiaz.com/blog/tags/simulation/>Simulation</a></li></ul><nav class=paginav><a class=prev href=https://www.arcosdiaz.com/blog/posts/2017-02-06-event-tracker/><span class=title>« Prev</span><br><span>Visualizing parallel event series in Python</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2026 <a href=https://www.arcosdiaz.com/blog/>Dario Arcos-Díaz, PhD</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>